@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


<nav class="shadow-sm bg-body-tertiary rounded collapse show" id="collapseExample">
    <div class="Dash-nav nav nav-underline nav-item text-info" id="nav-tab" role="tablist">
        @if (Context.Request.Cookies["CookieRole"] == "1")
        {
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "Dashbord" ? "underLine" : "")" id="dashTab"
               aria-selected="true" asp-action="Dashbord" asp-controller="AdminDash">Dashboard</a>
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "ProviderLoc" ? "underLine" : "")" id="proLocTab"
               aria-selected="false" asp-action="ProviderLoc" asp-controller="AdminTab">Provider Location</a>
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "Profile" ? "underLine" : "")" id="profileTab"
               aria-selected="false" asp-action="Profile" asp-controller="AdminTab">My Profile</a>
            <a class="nav-link ps-3 bg-transparent dropdown-toggle @(ViewContext.ActionDescriptor.RouteValues["action"] == "Provider" ? "underLine" : "") @(ViewContext.ActionDescriptor.RouteValues["action"] == "Scheduling" ? "underLine" : "")" id="providerTab" data-bs-toggle="dropdown" aria-expanded="false">Providers</a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" asp-action="Provider" asp-controller="AdminTab" id="providerTab">Provider</a></li>
                <li><a class="dropdown-item" asp-action="Scheduling" asp-controller="AdminTab" id="ScheduleTab">Scheduling</a></li>
                <li><a class="dropdown-item" href="#">Invoicing</a></li>
            </ul>
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "PartnerTab" ? "underLine" : "")" id="AccessTab"
               aria-selected="false" asp-action="PartnerTab" asp-controller="AdminTab">Partners</a>
            <a class="nav-link ps-3 bg-transparent  dropdown-toggle @(ViewContext.ActionDescriptor.RouteValues["action"] == "Access" ? "underLine" : "") @(ViewContext.ActionDescriptor.RouteValues["action"] == "UserAccess" ? "underLine" : "") @(ViewContext.ActionDescriptor.RouteValues["action"] == "AdminCreate" ? "underLine" : "")" data-bs-toggle="dropdown" aria-expanded="false">Access</a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" asp-action="Access" asp-controller="AdminTab">Account Access</a></li>
                <li><a class="dropdown-item" asp-action="UserAccess" asp-controller="AdminTab"> User Access </a></li>
                <li><a class="dropdown-item" asp-action="AdminCreate" asp-controller="AdminTab">Create Admin</a></li>
            </ul>
            <a class="nav-link ps-3 bg-transparent dropdown-toggle @(ViewContext.ActionDescriptor.RouteValues["action"] == "SearchRecord" ? "underLine" : "") @(ViewContext.ActionDescriptor.RouteValues["action"] == "Emaillog" ? "underLine" : "") @(ViewContext.ActionDescriptor.RouteValues["action"] == "SMSlog" ? "underLine" : "")  @(ViewContext.ActionDescriptor.RouteValues["action"] == "PatientHistory" ? "underLine" : "")  @(ViewContext.ActionDescriptor.RouteValues["action"] == "BlockHistory" ? "underLine" : "")" id="recordTab" data-bs-toggle="dropdown" aria-expanded="false">Records</a>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" asp-action="SearchRecord" asp-controller="AdminTab">Search Records</a></li>
                <li><a class="dropdown-item" asp-action="Emaillog" asp-controller="AdminTab"> Email Logs</a></li>
                <li><a class="dropdown-item" asp-action="SMSlog" asp-controller="AdminTab"> SMS Logs</a></li>
                <li><a class="dropdown-item" asp-action="PatientHistory" asp-controller="AdminTab">Patient Records</a></li>
                <li><a class="dropdown-item" asp-action="BlockHistory" asp-controller="AdminTab">Blocked History</a></li>
            </ul>
        }
        else
        {
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "Dashbord" ? "underLine" : "")" id="dashTab"
               aria-selected="true" asp-action="Dashbord" asp-controller="AdminDash">Dashboard</a>
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "Invoice" ? "underLine" : "")"
               aria-selected="true" href="#">Invoice</a>
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "Scheduling" ? "underLine" : "")" id="dashTab"
               aria-selected="true" asp-action="Scheduling" asp-controller="AdminTab">My Schedule</a>
            <a class="nav-link ps-3 bg-transparent @(ViewContext.ActionDescriptor.RouteValues["action"] == "Profile" ? "underLine" : "")" id="dashTab"
               aria-selected="true" asp-action="Profile" asp-controller="Physician">My Profile</a>
        }
    </div>
</nav>

<script asp-append-version="true">
    $(document).ready(function () {
        
        $.ajax({
            url: '/Home/getMenuList',
            method: 'GET',
            success: function (response) {
                //var menulist = response.value;
                //var menuItems = menulist.split(',');
                //if (!menuItems.includes($('#dashTab').text())) {
                //    $('#dashTab').remove();
                //}
                //if (!menuItems.includes($('#proLocTab').text())) {
                //    $('#proLocTab').remove();
                //}
                //if (!menuItems.includes($('#profileTab').text())) {
                //    $('#profileTab').remove();
                //}
                //if (!menuItems.includes($('#providerTab').text())) {
                //    $('#providerTab').remove();
                //}
                //if (!menuItems.includes($('#ScheduleTab').text())) {
                //    $('#ScheduleTab').remove();
                //}


                //const menuItems = {
                //    'Dashboard': '#dashTab',
                //    'Provider Location': '#proLocTab',
                //    'My Profile': '#profileTab',
                //    'Provider': '#providerTab',
                //    'Scheduling': '#ScheduleTab'
                //};

                //var menuItemsList = response.value.split(', ');
                //console.log(menuItemsList);
                //for (const [item, tabId] of Object.entries(menuItems)) {
                //    const tabText = $(tabId).text();
                //    if (!menuItemsList.includes(tabText)) {
                //        $(tabId).remove();
                //        console.log(`Removed tab: ${tabId}`);
                //    } else {
                //        console.log(`Tab ${item} is present`);
                //    }
                }
            },
            error: function (xhr, status, error) {
                if (xhr["status"] == 401) {
                    window.location.href = "/Patient/PatientLogin";
                } else {
                    console.error(xhr.responseText)
                }
            }
        });

    });
</script>