@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@{
    int lastDate = DateTime.DaysInMonth(DateTime.Now.Year, @ViewBag.month);
}

<div class="rounded shadow p-4 mb-5 bg-body-tertiary">
    <div class="table-responsive mt-2">
        <table class="table">
            <thead class="table-secondary">
                <tr>
                    <th scope="col"> Date </th>
                    <th scope="col"> Item </th>
                    <th scope="col"> Amount </th>
                    <th scope="col"> Bill </th>
                    <th scope="col"> Action </th>
                </tr>
            </thead>
            <tbody>
                @if (Model == 1)
                {
                    @for (var i = 1; i <= 15; i++)
                    {
                        <tr>
                            <td>@ViewBag.month.ToString("00")/@i.ToString("00")/@System.DateTime.Now.Date.ToString("yyyy") </td>
                            <td><input type="text" class="form-control" /></td>
                            <td><input type="number" class="form-control" valuex="0" /></td>
                            <td>
                                <div class="d-flex m-auto">
                                    <div class="p-0 w-100">
                                        <input type="text" class="form-control bg-transparent" id="selectedFile_@i" placeholder="select File"
                                               disabled>
                                        <label class="ms-3"></label>
                                    </div>
                                    <div>
                                        <label class="btn btn-outline-info d-flex ">
                                            <input type="file" style="display: none;" id="FileInput_@i" name="DocFile" onchange="updateSelectedFileName(this, @i)">
                                            <i class="bi bi-cloud-arrow-up border-info"></i>
                                            <span class="upload_txt ms-2">Upload</span>
                                        </label>
                                    </div>
                                </div>
                            </td>
                            <td></td>
                        </tr>
                    }
                }
                else
                {
                    @for (var i = 16; i <= lastDate; i++)
                    {
                        <tr>
                            <td>@ViewBag.month.ToString("00")/@i.ToString("00")/@System.DateTime.Now.Date.ToString("yyyy") </td>
                            <td><input type="text" class="form-control" /></td>
                            <td><input type="number" class="form-control" valuex="0" /></td>
                            <td>
                                <div class="d-flex m-auto">
                                    <div class="p-0 w-100">
                                        <input type="text" class="form-control bg-transparent" id="selectedFile_@i" placeholder="select File"
                                               disabled>
                                        <label class="ms-3"></label>
                                    </div>
                                    <div>
                                        <label class="btn btn-outline-info d-flex ">
                                            <input type="file" style="display: none;" id="FileInput_@i" name="DocFile" onchange="updateSelectedFileName(this, @i)">
                                            <i class="bi bi-cloud-arrow-up border-info"></i>
                                            <span class="upload_txt ms-2">Upload</span>
                                        </label>
                                    </div>
                                </div>
                            </td>
                            <td></td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>

<script>
    function updateSelectedFileName(input, index) {
        var selectedFile = document.getElementById('selectedFile_' + index);
        if (input.files.length > 0) {
            selectedFile.value = input.files[0].name;
        } else {
            selectedFile.value = '';
        }
    }
</script>