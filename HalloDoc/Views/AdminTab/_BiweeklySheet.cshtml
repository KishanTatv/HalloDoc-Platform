@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    DateTime startDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 15);
    DateTime endDate = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.DaysInMonth(DateTime.Now.Year, DateTime.Now.Month));
}

<div class="d-flex w-100 justify-content-center pb-4">
    <div class="HContainer m-auto">
        <div class="d-flex justify-content-end">
            <a class="btn w-5 btn-info rounded bg-transparent m-2 text-info" asp-controller="AdminTab" asp-action="Invoice">
                <strong class="pe-2">&lt Back</strong>
            </a>
        </div>

        <div class="rounded shadow p-4 mb-5 bg-body-tertiary rounded">
            <div class="table-responsive">
                <table class="table">
                    <thead class="table-secondary">
                        <tr>
                            <th scope="col"> Date </th>
                            <th scope="col"> On-call Hours </th>
                            <th scope="col"> Total Hours </th>
                            <th scope="col"> Weekend/ Holiday</th>
                            <th scope="col"> Number of Housecall </th>
                            <th scope="col"> Number of Phone Consult</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model == 0)
                        {
                            @for (var i = 1; i <= startDate.Date.Day; i++)
                            {
                                <tr>
                                    <td>@System.DateTime.Now.Date.ToString("MM")/@i.ToString("00")/@System.DateTime.Now.Date.ToString("yyyy") </td>
                                    <td>0</td>
                                    <td><input type="number" class="form-control" value="0" /></td>
                                    <td><input type="checkbox" class="form-check-input checkboxClass mt-2" /></td>
                                    <td><input type="number" class="form-control" /></td>
                                    <td><input type="number" class="form-control" /></td>
                                </tr>
                            }
                        }
                        else
                        {
                            @for (var i = 16; i <= endDate.Date.Day; i++)
                            {
                                <tr>
                                    <td>@System.DateTime.Now.Date.ToString("MM")/@i.ToString("00")/@System.DateTime.Now.Date.ToString("yyyy") </td>
                                    <td>0</td>
                                    <td><input type="number" class="form-control" value="0" /></td>
                                    <td><input type="checkbox" class="form-check-input checkboxClass mt-2" /></td>
                                    <td><input type="number" class="form-control" /></td>
                                    <td><input type="number" class="form-control" /></td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
            <div class="d-flex justify-content-end">
                <button type="button" class="btn btn-info text-light">Submit</button>
            </div>
        </div>
        <button type="button" class="btn btn-info text-light addRecpt">Add Recipts</button>
        <div id="ReciptPartial"></div>
        <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-info text-light">Finalize</button>
        </div>
    </div>
</div>

<script asp-append-version="true">
    $('.addRecpt').click(function () {
        var period = @Model;
        $.ajax({
            url: '/AdminTab/AddRecipt',
            method: 'POST',
            data: {period: period},
            success: function (response) {
                $('#ReciptPartial').html(response);
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });
    });
</script>